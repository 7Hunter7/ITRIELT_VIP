# Каталог VIP-объектов ITRIELT в Краснодаре

## Описание

Проект представляет собой веб-приложение, разработанное для демонстрации каталога VIP-объектов недвижимости, предлагаемых компанией ITRIELT в Краснодаре. Приложение позволяет пользователям просматривать, фильтровать и сортировать объекты, а также взаимодействовать с ними.

## Технологии

- **HTML:** Для структурирования контента.
- **SCSS:** Для стилизации (использование препроцессора SCSS для модульности и удобства разработки).
- **JavaScript:** Для реализации динамического поведения, обработки событий, генерации контента и работы с локальным хранилищем.
- **CSS:** Итоговые стили.

## Функциональность

- **Просмотр объектов:** Отображение карточек объектов с информацией о площади, цене, адресе и логотипе застройщика.
- **Сортировка:** Сортировка объектов по площади (по возрастанию/убыванию) и цене (по возрастанию/убыванию). Используется кастомный select с возможностью отображения в виде dropdown на десктопе и модального окна на мобильных устройствах.
- **Избранное:** Добавление объектов в избранное (с сохранением состояния в `localStorage`).
- **Action Sheet:** Отображение контекстного меню для каждой карточки объекта, предоставляющее дополнительные действия. На мобильных устройствах отображается как модальное окно, на десктопе - как dropdown. Предоставляет возможность добавления объектов в избранное и множественного выбора.
- **Множественный выбор:** Возможность выбора нескольких объектов через Action Sheet. При выборе показывается панель с количеством выбранных объектов и кнопкой отмены.
- **Адаптивность:** Приложение адаптировано для просмотра на различных устройствах, включая мобильные (адаптивный статус-бар, Action Sheet и custom select).
- **Статус-бар:** Отображение времени, уровня заряда батареи и иконок сети. Реализована имитация уменьшения заряда батареи с течением времени. На мобильных устройствах затемняется для лучшей видимости.
- **Застройщики:** Отображение логотипов застройщиков с возможностью выбора (в текущей реализации, только отображение логотипов).
- **Кнопка "Показать ещё":** Подгрузка карточек объектов при нажатии на кнопку "Показать ещё". Количество подгружаемых карточек адаптируется под размер экрана.
- **Локальное хранилище:** Данные хранятся в локальном хранилище браузера `localStorage` (для сохранения состояния и улучшения производительности, данные хранятся 5 минут).

## Функции (index.js)

### Общие

- **`isMobileDevice(displayResolution)`:**
  - Определяет, является ли устройство мобильным на основе ширины экрана.
  - **Параметры:** `displayResolution` (number) - Ширина экрана.
  - **Возвращает:** `boolean` - `true`, если устройство мобильное, иначе `false`.

### Статус-бар

- **`updateTime()`:**

  - Обновляет время, отображаемое в статус-баре.
  - Получает текущее время и форматирует его в виде "HH:MM".

- **`updateBatteryLevel(level)`:**

  - Обновляет уровень заряда батареи, отображаемый в статус-баре.
  - Изменяет ширину элемента `batteryLevel` в соответствии с текущим уровнем заряда.
  - Также изменяет цвет индикатора в зависимости от уровня заряда (зеленый, оранжевый, красный).
  - **Параметры:** `level` (number) - Текущий уровень заряда батареи (в процентах).

- **`decreaseBattery()`:**
  - Уменьшает уровень заряда батареи на 1%.
  - Если уровень заряда достигает 0, устанавливает его обратно на 100%.

### Карточки объектов

- **`generateRandomNumber(min, max)`:**

  - Генерирует случайное целое число в заданном диапазоне.
  - **Параметры:**
    - `min` (number) - Минимальное значение диапазона (включительно).
    - `max` (number) - Максимальное значение диапазона (включительно).
  - **Возвращает:** `number` - Случайное целое число.

- **`generateRandomPrice()`:**

  - Генерирует случайную цену объекта недвижимости в диапазоне от 3,000,000 до 15,000,000.
  - **Возвращает:** `number` - Случайная цена.

- **`generateCardData(i)`:**

  - Генерирует данные для одной карточки объекта недвижимости.
  - Использует случайные значения для различных параметров (количество комнат, площадь, цена и т.д.).
  - Также выбирает логотип застройщика и планировку объекта из соответствующих массивов.
  - **Параметры:** `i` (number) - Индекс карточки (используется для генерации уникальных данных).
  - **Возвращает:** `object` - Объект с данными для карточки.

- **`createCardHTML(data)`:**

  - Генерирует HTML-код для одной карточки объекта недвижимости на основе полученных данных.
  - Использует template literals для создания HTML-строки.
  - **Параметры:** `data` (object) - Объект с данными для карточки (сгенерирован функцией `generateCardData`).
  - **Возвращает:** `string` - HTML-код карточки.

- **`generateAndRenderCards()`:**

  - Генерирует данные для карточек объектов и отображает их на странице.
  - Сначала проверяет наличие данных в локальном хранилище.
  - Если данные есть и не устарели (хранятся менее 5 минут), использует их.
  - В противном случае генерирует новые данные и сохраняет их в локальном хранилище.
  - **Возвращает:** `Array<object>` - Массив объектов с данными для карточек.

- **`getCardDataForDisplay(startIndex, quantity)`:**

  - Возвращает часть массива `cardData`, содержащую данные для отображения.
  - Используется для получения данных для начального отображения и для добавления новых карточек при нажатии на кнопку "Показать ещё".
  - **Параметры:**
    - `startIndex` (number) - Индекс, с которого начинается срез массива.
    - `quantity` (number) - Количество элементов, которые нужно включить в срез.
  - **Возвращает:** `Array<object>` - Массив объектов с данными для карточек.

- **`renderCards(cards)`:**

  - Отображает карточки объектов на странице.
  - Получает массив объектов с данными и добавляет соответствующие HTML-элементы в DOM.
  - **Параметры:** `cards` (Array<object>) - Массив объектов с данными для карточек.

- **`updateShowMoreButton()`:**

  - Обновляет текст на кнопке "Показать ещё" и скрывает ее, если все карточки уже отображены.
  - Текст на кнопке показывает, сколько еще карточек можно добавить.

- **`addIsFavoriteClass(favoriteElement, isFavorite)`:**

  - Добавляет/удаляет класс `objects__card-favorite--active` элементу "избранное" карточки в зависимости от состояния `isFavorite`.
  - **Параметры:**
    - `favoriteElement` (HTMLElement) - Элемент "избранное" карточки.
    - `isFavorite` (boolean) - Текущее состояние "избранное" (true - добавлено, false - не добавлено).

- **`updateFavoriteButtonText(button, isFavorite)`:**

  - Обновляет текст кнопки "Добавить в избранное"/"Убрать из избранного" в Action Sheet.
  - **Параметры:**
    - `button` (HTMLElement) - Кнопка "Добавить в избранное"/"Убрать из избранного".
    - `isFavorite` (boolean) - Текущее состояние "избранное".

- **`positionActionSheet(actionSheet, optionsButton)`:**
  - Позиционирует Action Sheet (контекстное меню) для десктопного отображения.
  - **Параметры:**
    - `actionSheet` (HTMLElement) - Элемент Action Sheet.
    - `optionsButton` (HTMLElement) - Кнопка опций, вызвавшая Action Sheet.

### Обработчики событий

- Обработчики событий для кнопок "Добавить в избранное" в Action Sheet: переключают состояние "избранное" карточки, обновляют текст кнопки и состояние элемента "избранное" на карточке, сохраняют данные в localStorage.
- Обработчики событий для кнопок опций (открытия Action Sheet): отображают/скрывают Action Sheet в зависимости от типа устройства (мобильный/десктоп).
- Обработчики событий для кнопки "Отмена" в Action Sheet (для мобильных устройств): закрывают Action Sheet.
- Обработчик события клика вне карточки: закрывает Action Sheet (для десктопных устройств).
- Обработчик события клика на элементе сортировки: сортирует карточки по выбранному критерию и обновляет отображение.
- Обработчик события клика вне элемента сортировки: закрывает выпадающий список сортировки.

### Инициализация

- Вызов `generateAndRenderCards()` сразу после загрузки страницы: генерирует и отображает карточки объектов при первой загрузке.
- Установка интервалов для обновления времени и уровня заряда батареи.
- Инициализация обработчиков событий для элементов страницы.

## Структура проекта

```bash
├── public/ # Публичные ресурсы (изображения, иконки)
│ ├── builders/ # Логотипы застройщиков
│ ├── icons/ # Иконки
│ ├── objects/ # Изображения объектов и планировки
├── styles/ # Стили (SCSS)
│ ├── components/ # Компоненты стилей (частичные SCSS файлы)
│ │ ├── _action-sheet.scss
│ │ ├── _builder.scss
│ │ ├── _footer.scss
│ │ ├── _header.scss
│ │ ├── _main__top.scss
│ │ ├── _objects-filter.scss
│ │ ├── _objects.scss
│ │ ├── _search.scss
│ │ ├── _show-more.scss
│ │ ├── _status-bar.scss
│ ├── _mixins.scss # Миксины
│ ├── _variables.scss # Переменные
│ ├── style.css # Скомпилированный CSS
│ ├── style.css.map # Source map для CSS
│ └── style.scss # Главный SCSS файл
├── index.html # Главный HTML файл
└── index.js # Главный JavaScript файл
```

## Запуск проекта

1.  Убедитесь, что у вас установлен веб-сервер (например, `Live Server` в VS Code, или любой другой).
2.  Убедитесь, что у вас установлен компилятор для препроцессора `Sass (.sass only)` и `Live Sass Compiler`
3.  Откройте `index.html` в браузере через ваш веб-сервер.

## Планы по развитию

- Улучшение UI/UX.
- Поддержка PWA (Progressive Web App).
- И другие улучшения.

## Автор

Ivan Kalugin
Телеграмм: https://t.me/Ivan_Anatolievich_Kalugin

## Лицензия

**MIT License**
Этот проект лицензирован в соответствии с условиями лицензии MIT. Смотрите файл [LICENSE](LICENSE) для получения подробной информации.
